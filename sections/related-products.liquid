{%- if recommendations.performed and recommendations.products_count > 0 -%}
  <section class="related-products" data-section-id="{{ section.id }}">
    <div class="container">
      <!-- Section Header -->
      <div class="related-products__header">
        <div class="section-divider">
          <div class="section-divider__line section-divider__line--short"></div>
          <span class="section-divider__text">RELATED</span>
          <div class="section-divider__line section-divider__line--long"></div>
        </div>
        
        <h2 class="related-products__title">{{ section.settings.heading | default: 'You may also like' }}</h2>
        
        <div class="section-divider">
          <div class="section-divider__line section-divider__line--long"></div>
          <span class="section-divider__text">{{ recommendations.products_count }}</span>
          <div class="section-divider__line section-divider__line--short"></div>
        </div>
      </div>

      <!-- Products Grid -->
      <div class="related-products__grid">
        {%- for product in recommendations.products limit: section.settings.products_to_show -%}
          {% render 'product-card', product: product, index: forloop.index %}
        {%- endfor -%}
      </div>
    </div>
  </section>
{%- endif -%}

{% style %}
  .related-products {
    padding: 4rem 0;
    background: #fff;
    border-top: 1px solid rgba(0, 0, 0, 0.05);
  }

  .related-products__header {
    margin-bottom: 3rem;
  }

  .related-products__title {
    text-align: center;
    font-size: 1.5rem;
    font-family: 'Space Grotesk', monospace;
    font-weight: 300;
    color: #000;
    letter-spacing: 0.1em;
    line-height: 1;
    padding: 1.5rem 0;
  }

  @media (min-width: 768px) {
    .related-products__title {
      font-size: 1.875rem;
    }
  }

  .related-products__grid {
    display: grid;
    grid-template-columns: repeat(2, 1fr);
    gap: 1rem;
  }

  @media (min-width: 768px) {
    .related-products__grid {
      grid-template-columns: repeat(4, 1fr);
      gap: 1.5rem;
    }
  }
{% endstyle %}

{% schema %}
{
  "name": "Related Products",
  "tag": "section",
  "class": "section-related-products",
  "settings": [
    {
      "type": "text",
      "id": "heading",
      "label": "Heading",
      "default": "You may also like"
    },
    {
      "type": "range",
      "id": "products_to_show",
      "label": "Products to show",
      "min": 2,
      "max": 8,
      "step": 1,
      "default": 4
    }
  ]
}
{% endschema %}

